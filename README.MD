# –ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä Telegram-–∫–∞–Ω–∞–ª–æ–≤ | Telegram Channel Analyzer

![Python](https://img.shields.io/badge/Python-3.10+-blue?style=for-the-badge&logo=python&logoColor=white)
![Django](https://img.shields.io/badge/Django-4.2+-092E20?style=for-the-badge&logo=django&logoColor=white)
![Django REST Framework](https://img.shields.io/badge/DRF-3.14+-A30000?style=for-the-badge&logo=django&logoColor=white)
![Celery](https://img.shields.io/badge/Celery-5.3+-37814A?style=for-the-badge&logo=celery&logoColor=white)
![PostgreSQL](https://img.shields.io/badge/PostgreSQL-13-336791?style=for-the-badge&logo=postgresql&logoColor=white)
![Docker](https://img.shields.io/badge/Docker-20+-2496ED?style=for-the-badge&logo=docker&logoColor=white)
[![License: GPL v3](https://img.shields.io/badge/License-GPLv3-blue.svg?style=for-the-badge)](https://www.gnu.org/licenses/gpl-3.0)

–≠—Ç–æ –≤–µ–±-—Å–µ—Ä–≤–∏—Å, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—â–∏–π REST API –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ —Å–±–æ—Ä–∞ –∏ –∞–Ω–∞–ª–∏–∑–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø—É–±–ª–∏—á–Ω—ã—Ö Telegram-–∫–∞–Ω–∞–ª–æ–≤. –û–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **Telethon** –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å Telegram API –∏ **Celery** –¥–ª—è —Ñ–æ–Ω–æ–≤–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–¥–∞—á, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å –¥–ª–∏—Ç–µ–ª—å–Ω—ã–µ –∞–Ω–∞–ª–∏–∑—ã –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞.

## üöÄ –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

*   **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑:** –ó–∞–¥–∞—á–∏ –ø–æ —Å–±–æ—Ä—É –¥–∞–Ω–Ω—ã—Ö –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ, –Ω–µ –∑–∞—Å—Ç–∞–≤–ª—è—è –∫–ª–∏–µ–Ω—Ç–∞ –∂–¥–∞—Ç—å.
*   **REST API:** –£–¥–æ–±–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –¥—Ä—É–≥–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏ –∏–ª–∏ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏.
*   **–†–∞—Å—á–µ—Ç –∫–ª—é—á–µ–≤—ã—Ö –º–µ—Ç—Ä–∏–∫:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã—á–∏—Å–ª—è–µ—Ç:
    *   **ER (Engagement Rate):** –í–æ–≤–ª–µ—á–µ–Ω–Ω–æ—Å—Ç—å –∞—É–¥–∏—Ç–æ—Ä–∏–∏.
    *   **CPV (Cost Per View):** –°—Ç–æ–∏–º–æ—Å—Ç—å –æ–¥–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞.
    *   **CPM (Cost Per Mille):** –°—Ç–æ–∏–º–æ—Å—Ç—å —Ç—ã—Å—è—á–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤.
    *   –°—Ä–µ–¥–Ω–µ–µ –∏ –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤/—Ä–µ–∞–∫—Ü–∏–π.
*   **–ì–∏–±–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞:** –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∑–∞–¥–∞–≤–∞—Ç—å –ø–µ—Ä–∏–æ–¥ –∞–Ω–∞–ª–∏–∑–∞ (–≤ –¥–Ω—è—Ö) –∏ —Å—Ç–æ–∏–º–æ—Å—Ç—å –ø–æ—Å—Ç–∞ –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ –º–µ—Ç—Ä–∏–∫.
*   **–ü—Ä–æ—Å—Ç–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ:** –ü—Ä–æ–µ–∫—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω —Å –ø–æ–º–æ—â—å—é Docker –∏ Docker Compose.

## ‚öôÔ∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç        | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è                                                                                                          |
| ---------------- | ------------------------------------------------------------------------------------------------------------------- |
| **–ë—ç–∫–µ–Ω–¥**       | [Python](https://www.python.org/), [Django](https://www.djangoproject.com/), [DRF](https://www.django-rest-framework.org/) |
| **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**  | [PostgreSQL](https://www.postgresql.org/)                                                                           |
| **–û—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á**| [Celery](https://docs.celeryq.dev/) —Å –±—Ä–æ–∫–µ—Ä–æ–º [Redis](https://redis.io/)                                               |
| **Telegram API** | [Telethon](https://docs.telethon.dev/)                                                                              |
| **–í–µ–±-—Å–µ—Ä–≤–µ—Ä**   | [Daphne](https://github.com/django/daphne/) (ASGI)                                                                    |
| **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è** | [Docker](https://www.docker.com/), [Docker Compose](https://docs.docker.com/compose/)                                |

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

*   [Docker](https://docs.docker.com/get-docker/)
*   [Docker Compose](https://docs.docker.com/compose/install/) (–æ–±—ã—á–Ω–æ –ø–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è —Å Docker Desktop)

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
git clone https://github.com/your-username/Telegram-API-Parser.git
cd Telegram-API-Parser
```

### 2. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–ü–µ—Ä–µ–¥ –ø–µ—Ä–≤—ã–º –∑–∞–ø—É—Å–∫–æ–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è.

1.  **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª —Å –ø—Ä–∏–º–µ—Ä–æ–º:**
    ```bash
    cp .env.example .env
    ```

2.  **–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª `.env`:**
    –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ —Ç–µ–∫—Å—Ç–æ–≤–æ–º —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è. –û—Å–æ–±–æ–µ –≤–Ω–∏–º–∞–Ω–∏–µ —É–¥–µ–ª–∏—Ç–µ:

    *   `SECRET_KEY`: –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∫–ª—é—á Django. –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å [–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä](https://djecrety.ir/).
    *   `TELEGRAM_API_ID` –∏ `TELEGRAM_API_HASH`: **–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ!** –ü–æ–ª—É—á–∏—Ç–µ —ç—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏—è –Ω–∞ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–º —Å–∞–π—Ç–µ [my.telegram.org](https://my.telegram.org) –≤ —Ä–∞–∑–¥–µ–ª–µ "API development tools".

### 3. –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Å—Å–∏–∏ Telegram (–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π —à–∞–≥!)

–î–ª—è —Ä–∞–±–æ—Ç—ã —Å–µ—Ä–≤–∏—Å–∞ —Ç—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω–∞—è —Å–µ—Å—Å–∏—è Telegram. –≠—Ç–∞ –ø—Ä–æ—Ü–µ–¥—É—Ä–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è **—Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑** –ø–µ—Ä–µ–¥ –ø–µ—Ä–≤—ã–º –∑–∞–ø—É—Å–∫–æ–º.

1.  **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É `createsession` –≤ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–º —Ä–µ–∂–∏–º–µ:**
    –í—ã–ø–æ–ª–Ω–∏—Ç–µ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ —Å–ª–µ–¥—É—é—â—É—é –∫–æ–º–∞–Ω–¥—É. –§–ª–∞–≥ `-it` –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–µ–Ω, —Ç–∞–∫ –∫–∞–∫ –æ–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–≤–æ–¥–∏—Ç—å –¥–∞–Ω–Ω—ã–µ (–Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞, –∫–æ–¥) –≤ –∫–æ–Ω—Å–æ–ª—å.
    ```bash
    docker compose run --rm -it app python manage.py createsession
    ```

2.  **–°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –≤ –∫–æ–Ω—Å–æ–ª–∏:**
    *   –í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞, –∫ –∫–æ—Ç–æ—Ä–æ–º—É –ø—Ä–∏–≤—è–∑–∞–Ω –≤–∞—à Telegram-–∞–∫–∫–∞—É–Ω—Ç.
    *   –í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏–¥–µ—Ç –≤–∞–º –≤ Telegram.
    *   –ï—Å–ª–∏ —É –≤–∞—Å –≤–∫–ª—é—á–µ–Ω–∞ –¥–≤—É—Ö—Ñ–∞–∫—Ç–æ—Ä–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è, –≤–≤–µ–¥–∏—Ç–µ –≤–∞—à –æ–±–ª–∞—á–Ω—ã–π –ø–∞—Ä–æ–ª—å.

    –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –≤—Ö–æ–¥–∞ —Å–µ—Å—Å–∏—è –±—É–¥–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –≤ volume, –∏ –≤—ã —Å–º–æ–∂–µ—Ç–µ –∑–∞–ø—É—Å–∫–∞—Ç—å –ø—Ä–æ–µ–∫—Ç.

### 4. –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è —Å–µ—Å—Å–∏–∏ –º–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã.

1.  **–°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ:**
    ```bash
    docker compose up --build -d
    ```

2.  **–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:**
    ```bash
    docker compose exec app python manage.py migrate
    ```

3.  **–°–æ–∑–¥–∞–Ω–∏–µ —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):**
    –î–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ Django (`/admin/`) —Å–æ–∑–¥–∞–π—Ç–µ —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
    ```bash
    docker compose exec app python manage.py createsuperuser
    ```

üéâ **–ü—Ä–æ–µ–∫—Ç –∑–∞–ø—É—â–µ–Ω –∏ –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ!** –°–µ—Ä–≤–∏—Å –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É `http://localhost:8000`.

---

## üìñ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ API

### 1. –ó–∞–ø—É—Å–∫ –∞–Ω–∞–ª–∏–∑–∞ –∫–∞–Ω–∞–ª–∞

–û—Ç–ø—Ä–∞–≤—å—Ç–µ `POST` –∑–∞–ø—Ä–æ—Å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–π –∑–∞–¥–∞—á–∏ –∞–Ω–∞–ª–∏–∑–∞. –ó–∞–¥–∞—á–∞ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ –æ—á–µ—Ä–µ–¥—å –∏ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–∞ —Ñ–æ–Ω–æ–≤—ã–º –≤–æ—Ä–∫–µ—Ä–æ–º.

*   **URL:** `http://localhost:8000/api/analyzer/analyze/`
*   **–ú–µ—Ç–æ–¥:** `POST`
*   **–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ (JSON):**

    ```json
    {
        "channel_username": "durov",
        "days_to_analyze": 30,
        "price": 50000.0
    }
    ```
    *   `channel_username` (string, required): –Æ–∑–µ—Ä–Ω–µ–π–º –∫–∞–Ω–∞–ª–∞ (–±–µ–∑ `@`).
    *   `days_to_analyze` (integer, optional, default: 30): –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –¥–Ω–µ–π –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞.
    *   `price` (float, optional, default: 1000.0): –°—Ç–æ–∏–º–æ—Å—Ç—å –ø–æ—Å—Ç–∞ –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ CPV –∏ CPM.

*   **–£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç (202 Accepted):**
    –°–µ—Ä–≤–µ—Ä –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –≤–µ—Ä–Ω–µ—Ç ID —Å–æ–∑–¥–∞–Ω–Ω–æ–π –∑–∞–¥–∞—á–∏.
    ```json
    {
        "task_id": "a1b2c3d4-e5f6-7890-1234-567890abcdef"
    }
    ```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `task_id`, –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â–µ–º —à–∞–≥–µ, —á—Ç–æ–±—ã –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —Å—Ç–∞—Ç—É—Å –∑–∞–¥–∞—á–∏ –∏ –ø–æ–ª—É—á–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç, –∫–æ–≥–¥–∞ –æ–Ω–∞ –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∞.

*   **URL:** `http://localhost:8000/api/analyzer/tasks/{task_id}/`
*   **–ú–µ—Ç–æ–¥:** `GET`

*   **–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞ (–∑–∞–¥–∞—á–∞ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ):**
    ```json
    {
        "task_id": "a1b2c3d4-e5f6-7890-1234-567890abcdef",
        "status": "PROGRESS",
        "channel_username": "durov",
        "days_to_analyze": 30,
        "price": 50000.0,
        "result": null,
        "error_message": null,
        "created_at": "2023-10-27T10:00:00Z",
        "updated_at": "2023-10-27T10:01:00Z"
    }
    ```

*   **–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞ (—É—Å–ø–µ—à–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ):**
    ```json
    {
        "task_id": "a1b2c3d4-e5f6-7890-1234-567890abcdef",
        "status": "SUCCESS",
        "channel_username": "durov",
        "result": {
            "channel_info": {
                "username": "durov",
                "subscribers": 1784967,
                "posts_analyzed": 15,
                "period_days": 30,
                "price_used": 50000.0
            },
            "calculated_metrics": {
                "avg_views": 685331,
                "avg_reactions": 39501.7,
                "total_views": 10279965,
                "total_reactions": 592525,
                "er_percent": 2.21,
                "cpv": 0.07,
                "cpm": 72.96
            }
        },
        // ...
    }
    ```

*   **–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞ (–æ—à–∏–±–∫–∞):**
    ```json
    {
        "task_id": "a1b2c3d4-e5f6-7890-1234-567890abcdef",
        "status": "FAILURE",
        "result": null,
        "error_message": "–ö–∞–Ω–∞–ª 'non_existent_channel' –Ω–µ –Ω–∞–π–¥–µ–Ω –∏–ª–∏ —è–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏–≤–∞—Ç–Ω—ã–º.",
        // ...
    }
    ```

## üìú –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π. –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ —Å–º–æ—Ç—Ä–∏—Ç–µ –≤ —Ñ–∞–π–ª–µ `LICENSE`.
